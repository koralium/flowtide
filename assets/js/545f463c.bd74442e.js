"use strict";(globalThis.webpackChunkflowtide=globalThis.webpackChunkflowtide||[]).push([[2705],{7368(e,t,r){r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"operators/topn","title":"Top N Operator","description":"The Top N Operator implements the Top N Relation defined in substrait.","source":"@site/docs/operators/topn.md","sourceDirName":"operators","slug":"/operators/topn","permalink":"/flowtide/docs/operators/topn","draft":false,"unlisted":false,"editUrl":"https://github.com/koralium/flowtide/tree/main/docs/docs/operators/topn.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Buffer Operator","permalink":"/flowtide/docs/operators/buffer"},"next":{"title":"Table Function Operator","permalink":"/flowtide/docs/operators/tablefunction"}}');var n=r(4848),s=r(8453);const i={sidebar_position:8},a="Top N Operator",d={},l=[{value:"Metrics",id:"metrics",level:2}];function h(e){const t={a:"a",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"top-n-operator",children:"Top N Operator"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.em,{children:"Top N Operator"})," implements the ",(0,n.jsx)(t.em,{children:"Top N Relation"})," defined in ",(0,n.jsx)(t.a,{href:"https://substrait.io/relations/physical_relations/#top-n-operation",children:"substrait"}),".\nIt returns the top N rows in a query based on user provided sort fields.\nIt stores all events in a B+ tree based on the giving ordering. For each event, it also has to check if the event is in the top, and if so\ncreate negation event if another event is no longer in the top."]}),"\n",(0,n.jsx)(t.h2,{id:"metrics",children:"Metrics"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.em,{children:"Top N Operator"})," has the following metrics:"]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Metric Name"}),(0,n.jsx)(t.th,{children:"Type"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"busy"}),(0,n.jsx)(t.td,{children:"Gauge"}),(0,n.jsx)(t.td,{children:"Value 0-1 on how busy the operator is."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"backpressure"}),(0,n.jsx)(t.td,{children:"Gauge"}),(0,n.jsx)(t.td,{children:"Value 0-1 on how much backpressure the operator has."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"health"}),(0,n.jsx)(t.td,{children:"Gauge"}),(0,n.jsx)(t.td,{children:"Value 0 or 1, if the operator is healthy or not."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"events"}),(0,n.jsx)(t.td,{children:"Counter"}),(0,n.jsx)(t.td,{children:"How many events the operator outputs."})]})]})]})]})}function c(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},8453(e,t,r){r.d(t,{R:()=>i,x:()=>a});var o=r(6540);const n={},s=o.createContext(n);function i(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);