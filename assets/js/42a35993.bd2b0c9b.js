"use strict";(self.webpackChunkflowtide=self.webpackChunkflowtide||[]).push([[4991],{9831:(i,I,e)=>{e.r(I),e.d(I,{assets:()=>a,contentTitle:()=>m,default:()=>c,frontMatter:()=>d,metadata:()=>s,toc:()=>g});const s=JSON.parse('{"id":"expressions/scalarfunctions/datetime","title":"Datetime Functions","description":"Strftime","source":"@site/docs/expressions/scalarfunctions/datetime.md","sourceDirName":"expressions/scalarfunctions","slug":"/expressions/scalarfunctions/datetime","permalink":"/flowtide/docs/expressions/scalarfunctions/datetime","draft":false,"unlisted":false,"editUrl":"https://github.com/koralium/flowtide/tree/main/docs/docs/expressions/scalarfunctions/datetime.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Rounding Functions","permalink":"/flowtide/docs/expressions/scalarfunctions/rounding"},"next":{"title":"Aggregate Functions","permalink":"/flowtide/docs/category/aggregate-functions"}}');var t=e(4848),n=e(8453);const d={sidebar_position:6},m="Datetime Functions",a={},g=[{value:"Strftime",id:"strftime",level:2},{value:"SQL Usage",id:"sql-usage",level:3},{value:"Get timestamp",id:"get-timestamp",level:2},{value:"SQL Usage",id:"sql-usage-1",level:3}];function l(i){const I={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...i.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.header,{children:(0,t.jsx)(I.h1,{id:"datetime-functions",children:"Datetime Functions"})}),"\n",(0,t.jsx)(I.h2,{id:"strftime",children:"Strftime"}),"\n",(0,t.jsx)(I.p,{children:(0,t.jsx)(I.a,{href:"https://substrait.io/extensions/functions_datetime/#strftime",children:"Substrait definition"})}),"\n",(0,t.jsxs)(I.p,{children:["Converts a timestamp in microseconds since 1970-01-01 00:00:00.000000 to a string.\nSee ",(0,t.jsx)(I.a,{href:"https://man7.org/linux/man-pages/man3/strftime.3.html",children:"strftime"})," on how to to write the format string."]}),"\n",(0,t.jsx)(I.p,{children:"Arguments:"}),"\n",(0,t.jsxs)(I.ol,{children:["\n",(0,t.jsx)(I.li,{children:"Timestamp in microseconds"}),"\n",(0,t.jsx)(I.li,{children:"Format as a string"}),"\n"]}),"\n",(0,t.jsx)(I.h3,{id:"sql-usage",children:"SQL Usage"}),"\n",(0,t.jsx)(I.pre,{children:(0,t.jsx)(I.code,{className:"language-sql",children:"INSERT INTO output\nSELECT\n    strftime(Orderdate, '%Y-%m-%d %H:%M:%S') as Orderdate\nFROM Orders\n"})}),"\n",(0,t.jsx)(I.h2,{id:"get-timestamp",children:"Get timestamp"}),"\n",(0,t.jsx)(I.p,{children:(0,t.jsx)(I.em,{children:"This function has no substrait equivalent"})}),"\n",(0,t.jsx)(I.admonition,{type:"warning",children:(0,t.jsx)(I.p,{children:"Get timestamp is not yet supported inside of join conditions."})}),"\n",(0,t.jsx)(I.admonition,{type:"info",children:(0,t.jsxs)(I.p,{children:["If you do comparisons with ",(0,t.jsx)(I.em,{children:"gettimestamp"})," it may be benificial to use buffered views to only send out changed rows to the rest of the stream.\nPlease see ",(0,t.jsx)(I.a,{href:"/docs/sql/createview#buffered-view",children:"Buffered view"}),"."]})}),"\n",(0,t.jsx)(I.p,{children:"Get the current timestamp (current datetime)."}),"\n",(0,t.jsx)(I.p,{children:"This is a meta function that itself does no computation, but is instead replaced during the optimization step with\njoins against a timestamp data source."}),"\n",(0,t.jsx)(I.p,{children:"Example:"}),"\n",(0,t.jsx)(I.p,{children:(0,t.jsx)(I.img,{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjAvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMS9SRUMtU1ZHLTIwMDEwOTA0L0RURC9zdmcxMC5kdGQiPgo8c3ZnIHZpZXdCb3g9IjAgMCA2NDAgMTIwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmlua3NwYWNlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgPGRlZnMgaWQ9ImRlZnNfYmxvY2siPgogICAgPGZpbHRlciBoZWlnaHQ9IjEuNTA0IiBpZD0iZmlsdGVyX2JsdXIiIGlua3NwYWNlOmNvbGxlY3Q9ImFsd2F5cyIgd2lkdGg9IjEuMTU3NSIgeD0iLTAuMDc4NzUiIHk9Ii0wLjI1MiI+CiAgICAgIDxmZUdhdXNzaWFuQmx1ciBpZD0iZmVHYXVzc2lhbkJsdXIzNzgwIiBpbmtzcGFjZTpjb2xsZWN0PSJhbHdheXMiIHN0ZERldmlhdGlvbj0iNC4yIiAvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDx0aXRsZT5ibG9ja2RpYWc8L3RpdGxlPgogIDxkZXNjPiAgYmxvY2tkaWFnIHsKICAgIFNvdXJjZSAtJmd0OyBQcm9qZWN0IC0mZ3Q7IFdyaXRlCiAgfTwvZGVzYz4KICA8cmVjdCBmaWxsPSJyZ2IoMCwwLDApIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHN0eWxlPSJmaWx0ZXI6dXJsKCNmaWx0ZXJfYmx1cik7b3BhY2l0eTowLjc7ZmlsbC1vcGFjaXR5OjEiIHdpZHRoPSIxMjgiIHg9IjY3IiB5PSI0NiIgLz4KICA8cmVjdCBmaWxsPSJyZ2IoMCwwLDApIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHN0eWxlPSJmaWx0ZXI6dXJsKCNmaWx0ZXJfYmx1cik7b3BhY2l0eTowLjc7ZmlsbC1vcGFjaXR5OjEiIHdpZHRoPSIxMjgiIHg9IjI1OSIgeT0iNDYiIC8+CiAgPHJlY3QgZmlsbD0icmdiKDAsMCwwKSIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiBzdHlsZT0iZmlsdGVyOnVybCgjZmlsdGVyX2JsdXIpO29wYWNpdHk6MC43O2ZpbGwtb3BhY2l0eToxIiB3aWR0aD0iMTI4IiB4PSI0NTEiIHk9IjQ2IiAvPgogIDxyZWN0IGZpbGw9InJnYigyNTUsMjU1LDI1NSkiIGhlaWdodD0iNDAiIHN0cm9rZT0icmdiKDAsMCwwKSIgd2lkdGg9IjEyOCIgeD0iNjQiIHk9IjQwIiAvPgogIDx0ZXh0IGZpbGw9InJnYigwLDAsMCkiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXN0eWxlPSJub3JtYWwiIGZvbnQtd2VpZ2h0PSJub3JtYWwiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRleHRMZW5ndGg9IjM5IiB4PSIxMjguNSIgeT0iNjYiPlNvdXJjZTwvdGV4dD4KICA8cmVjdCBmaWxsPSJyZ2IoMjU1LDI1NSwyNTUpIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHdpZHRoPSIxMjgiIHg9IjI1NiIgeT0iNDAiIC8+CiAgPHRleHQgZmlsbD0icmdiKDAsMCwwKSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtc3R5bGU9Im5vcm1hbCIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdGV4dExlbmd0aD0iNDAiIHg9IjMyMC4wIiB5PSI2NyI+UHJvamVjdDwvdGV4dD4KICA8cmVjdCBmaWxsPSJyZ2IoMjU1LDI1NSwyNTUpIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHdpZHRoPSIxMjgiIHg9IjQ0OCIgeT0iNDAiIC8+CiAgPHRleHQgZmlsbD0icmdiKDAsMCwwKSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtc3R5bGU9Im5vcm1hbCIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdGV4dExlbmd0aD0iMzEiIHg9IjUxMi41IiB5PSI2NiI+V3JpdGU8L3RleHQ+CiAgPHBhdGggZD0iTSAxOTIgNjAgTCAyNDggNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8cG9seWdvbiBmaWxsPSJyZ2IoMCwwLDApIiBwb2ludHM9IjI1NSw2MCAyNDgsNTYgMjQ4LDY0IDI1NSw2MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwYXRoIGQ9Ik0gMzg0IDYwIEwgNDQwIDYwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHBvbHlnb24gZmlsbD0icmdiKDAsMCwwKSIgcG9pbnRzPSI0NDcsNjAgNDQwLDU2IDQ0MCw2NCA0NDcsNjAiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KPC9zdmc+Cg==",alt:"blockdiag"})}),"\n",(0,t.jsx)(I.p,{children:"Where if project uses gettimestamp becomes:"}),"\n",(0,t.jsx)(I.p,{children:(0,t.jsx)(I.img,{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjAvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMS9SRUMtU1ZHLTIwMDEwOTA0L0RURC9zdmcxMC5kdGQiPgo8c3ZnIHZpZXdCb3g9IjAgMCA4MzIgMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmlua3NwYWNlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgPGRlZnMgaWQ9ImRlZnNfYmxvY2siPgogICAgPGZpbHRlciBoZWlnaHQ9IjEuNTA0IiBpZD0iZmlsdGVyX2JsdXIiIGlua3NwYWNlOmNvbGxlY3Q9ImFsd2F5cyIgd2lkdGg9IjEuMTU3NSIgeD0iLTAuMDc4NzUiIHk9Ii0wLjI1MiI+CiAgICAgIDxmZUdhdXNzaWFuQmx1ciBpZD0iZmVHYXVzc2lhbkJsdXIzNzgwIiBpbmtzcGFjZTpjb2xsZWN0PSJhbHdheXMiIHN0ZERldmlhdGlvbj0iNC4yIiAvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDx0aXRsZT5ibG9ja2RpYWc8L3RpdGxlPgogIDxkZXNjPiAgYmxvY2tkaWFnIHsKICAgIFNvdXJjZSAtJmd0OyBDcm9zc0pvaW4gLSZndDsgUHJvamVjdCAtJmd0OyBXcml0ZTsKICAgIFRpbWVzdGFtcFByb3ZpZGVyIC0mZ3Q7IENyb3NzSm9pbjsKICB9PC9kZXNjPgogIDxyZWN0IGZpbGw9InJnYigwLDAsMCkiIGhlaWdodD0iNDAiIHN0cm9rZT0icmdiKDAsMCwwKSIgc3R5bGU9ImZpbHRlcjp1cmwoI2ZpbHRlcl9ibHVyKTtvcGFjaXR5OjAuNztmaWxsLW9wYWNpdHk6MSIgd2lkdGg9IjEyOCIgeD0iNjciIHk9IjQ2IiAvPgogIDxyZWN0IGZpbGw9InJnYigwLDAsMCkiIGhlaWdodD0iNDAiIHN0cm9rZT0icmdiKDAsMCwwKSIgc3R5bGU9ImZpbHRlcjp1cmwoI2ZpbHRlcl9ibHVyKTtvcGFjaXR5OjAuNztmaWxsLW9wYWNpdHk6MSIgd2lkdGg9IjEyOCIgeD0iNjciIHk9IjEyNiIgLz4KICA8cmVjdCBmaWxsPSJyZ2IoMCwwLDApIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHN0eWxlPSJmaWx0ZXI6dXJsKCNmaWx0ZXJfYmx1cik7b3BhY2l0eTowLjc7ZmlsbC1vcGFjaXR5OjEiIHdpZHRoPSIxMjgiIHg9IjI1OSIgeT0iNDYiIC8+CiAgPHJlY3QgZmlsbD0icmdiKDAsMCwwKSIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiBzdHlsZT0iZmlsdGVyOnVybCgjZmlsdGVyX2JsdXIpO29wYWNpdHk6MC43O2ZpbGwtb3BhY2l0eToxIiB3aWR0aD0iMTI4IiB4PSI0NTEiIHk9IjQ2IiAvPgogIDxyZWN0IGZpbGw9InJnYigwLDAsMCkiIGhlaWdodD0iNDAiIHN0cm9rZT0icmdiKDAsMCwwKSIgc3R5bGU9ImZpbHRlcjp1cmwoI2ZpbHRlcl9ibHVyKTtvcGFjaXR5OjAuNztmaWxsLW9wYWNpdHk6MSIgd2lkdGg9IjEyOCIgeD0iNjQzIiB5PSI0NiIgLz4KICA8cmVjdCBmaWxsPSJyZ2IoMjU1LDI1NSwyNTUpIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHdpZHRoPSIxMjgiIHg9IjY0IiB5PSI0MCIgLz4KICA8dGV4dCBmaWxsPSJyZ2IoMCwwLDApIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC1zdHlsZT0ibm9ybWFsIiBmb250LXdlaWdodD0ibm9ybWFsIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0ZXh0TGVuZ3RoPSIzOSIgeD0iMTI4LjUiIHk9IjY2Ij5Tb3VyY2U8L3RleHQ+CiAgPHJlY3QgZmlsbD0icmdiKDI1NSwyNTUsMjU1KSIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiB3aWR0aD0iMTI4IiB4PSI2NCIgeT0iMTIwIiAvPgogIDx0ZXh0IGZpbGw9InJnYigwLDAsMCkiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXN0eWxlPSJub3JtYWwiIGZvbnQtd2VpZ2h0PSJub3JtYWwiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRleHRMZW5ndGg9IjExMSIgeD0iMTI4LjUiIHk9IjE0NyI+VGltZXN0YW1wUHJvdmlkZXI8L3RleHQ+CiAgPHJlY3QgZmlsbD0icmdiKDI1NSwyNTUsMjU1KSIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiB3aWR0aD0iMTI4IiB4PSIyNTYiIHk9IjQwIiAvPgogIDx0ZXh0IGZpbGw9InJnYigwLDAsMCkiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXN0eWxlPSJub3JtYWwiIGZvbnQtd2VpZ2h0PSJub3JtYWwiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRleHRMZW5ndGg9IjUzIiB4PSIzMjAuNSIgeT0iNjciPkNyb3NzSm9pbjwvdGV4dD4KICA8cmVjdCBmaWxsPSJyZ2IoMjU1LDI1NSwyNTUpIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHdpZHRoPSIxMjgiIHg9IjQ0OCIgeT0iNDAiIC8+CiAgPHRleHQgZmlsbD0icmdiKDAsMCwwKSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtc3R5bGU9Im5vcm1hbCIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdGV4dExlbmd0aD0iNDAiIHg9IjUxMi4wIiB5PSI2NyI+UHJvamVjdDwvdGV4dD4KICA8cmVjdCBmaWxsPSJyZ2IoMjU1LDI1NSwyNTUpIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHdpZHRoPSIxMjgiIHg9IjY0MCIgeT0iNDAiIC8+CiAgPHRleHQgZmlsbD0icmdiKDAsMCwwKSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtc3R5bGU9Im5vcm1hbCIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdGV4dExlbmd0aD0iMzEiIHg9IjcwNC41IiB5PSI2NiI+V3JpdGU8L3RleHQ+CiAgPHBhdGggZD0iTSAxOTIgNjAgTCAyNDggNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8cG9seWdvbiBmaWxsPSJyZ2IoMCwwLDApIiBwb2ludHM9IjI1NSw2MCAyNDgsNTYgMjQ4LDY0IDI1NSw2MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwYXRoIGQ9Ik0gMzg0IDYwIEwgNDQwIDYwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHBvbHlnb24gZmlsbD0icmdiKDAsMCwwKSIgcG9pbnRzPSI0NDcsNjAgNDQwLDU2IDQ0MCw2NCA0NDcsNjAiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8cGF0aCBkPSJNIDU3NiA2MCBMIDYzMiA2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwb2x5Z29uIGZpbGw9InJnYigwLDAsMCkiIHBvaW50cz0iNjM5LDYwIDYzMiw1NiA2MzIsNjQgNjM5LDYwIiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHBhdGggZD0iTSAxOTIgMTQwIEwgMjQwIDE0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwYXRoIGQ9Ik0gMjQwIDE0MCBMIDI0MCA2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwYXRoIGQ9Ik0gMjQwIDYwIEwgMjQ4IDYwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHBvbHlnb24gZmlsbD0icmdiKDAsMCwwKSIgcG9pbnRzPSIyNTUsNjAgMjQ4LDU2IDI0OCw2NCAyNTUsNjAiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KPC9zdmc+Cg==",alt:"blockdiag"})}),"\n",(0,t.jsxs)(I.p,{children:["This means that all rows that are evaluated will have the same value of ",(0,t.jsx)(I.em,{children:"gettimestamp"})," to ensure consistent results."]}),"\n",(0,t.jsx)(I.p,{children:"The timestamp provider also publishes a watermark called '__timestamp' which can be used to see the current time that has been evaluted in the stream."}),"\n",(0,t.jsx)(I.p,{children:"By default the timestamp is updated every hour. This is configurable during the stream setup:"}),"\n",(0,t.jsx)(I.pre,{children:(0,t.jsx)(I.code,{className:"language-csharp",children:"streamBuilder\n    .SetGetTimestampUpdateInterval(TimeSpan.FromHours(12))\n"})}),"\n",(0,t.jsx)(I.h3,{id:"sql-usage-1",children:"SQL Usage"}),"\n",(0,t.jsx)(I.pre,{children:(0,t.jsx)(I.code,{className:"language-sql",children:"INSERT INTO output\nSELECT\n    gettimestamp() as CurrentDateTime\nFROM Orders\n"})})]})}function c(i={}){const{wrapper:I}={...(0,n.R)(),...i.components};return I?(0,t.jsx)(I,{...i,children:(0,t.jsx)(l,{...i})}):l(i)}},8453:(i,I,e)=>{e.d(I,{R:()=>d,x:()=>m});var s=e(6540);const t={},n=s.createContext(t);function d(i){const I=s.useContext(n);return s.useMemo((function(){return"function"==typeof i?i(I):{...I,...i}}),[I,i])}function m(i){let I;return I=i.disableParentContext?"function"==typeof i.components?i.components(t):i.components||t:d(i.components),s.createElement(n.Provider,{value:I},i.children)}}}]);