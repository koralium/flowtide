"use strict";(self.webpackChunkflowtide=self.webpackChunkflowtide||[]).push([[470],{2172:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>s,default:()=>I,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"connectors/sqlserver","title":"SQL Server Connector","description":"The SQL Server connector has three different parts:","source":"@site/docs/connectors/sqlserver.md","sourceDirName":"connectors","slug":"/connectors/sqlserver","permalink":"/flowtide/docs/connectors/sqlserver","draft":false,"unlisted":false,"editUrl":"https://github.com/koralium/flowtide/tree/main/docs/docs/connectors/sqlserver.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Configuration Data","permalink":"/flowtide/docs/connectors/configurationdata"},"next":{"title":"Delta Lake Connector","permalink":"/flowtide/docs/connectors/deltalake"}}');var r=n(4848),l=n(8453);const a={sidebar_position:1},s="SQL Server Connector",d={},c=[{value:"Supported Data Types",id:"supported-data-types",level:2},{value:"Source",id:"source",level:2},{value:"Reading with change tracking",id:"reading-with-change-tracking",level:3},{value:"Reading without change tracking",id:"reading-without-change-tracking",level:3},{value:"Reading from views",id:"reading-from-views",level:4},{value:"Reading from tables",id:"reading-from-tables",level:4},{value:"Reading from large views or tables without change tracking",id:"reading-from-large-views-or-tables-without-change-tracking",level:4},{value:"Retry strategy (reading from SQL Server)",id:"retry-strategy-reading-from-sql-server",level:3},{value:"Sink",id:"sink",level:2},{value:"Custom Primary Keys",id:"custom-primary-keys",level:3},{value:"SQL Table Provider",id:"sql-table-provider",level:2}];function o(e){const i={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"sql-server-connector",children:"SQL Server Connector"})}),"\n",(0,r.jsx)(i.p,{children:"The SQL Server connector has three different parts:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Source"})," - Reads data from a SQL Server table."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Sink"})," - Writes results from a stream into a SQL Server table."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Table Provider"})," - Provides table information to the SQL plan builder."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"supported-data-types",children:"Supported Data Types"}),"\n",(0,r.jsxs)(i.p,{children:["The ",(0,r.jsx)(i.em,{children:"SQL Server connector"})," supports reading and writing the following data types:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Int"}),"\n",(0,r.jsx)(i.li,{children:"BigInt"}),"\n",(0,r.jsx)(i.li,{children:"Binary"}),"\n",(0,r.jsx)(i.li,{children:"Bit"}),"\n",(0,r.jsx)(i.li,{children:"Char"}),"\n",(0,r.jsx)(i.li,{children:"Date"}),"\n",(0,r.jsx)(i.li,{children:"Datetime"}),"\n",(0,r.jsx)(i.li,{children:"Datetime2"}),"\n",(0,r.jsx)(i.li,{children:"Decimal"}),"\n",(0,r.jsx)(i.li,{children:"Float"}),"\n",(0,r.jsx)(i.li,{children:"Image"}),"\n",(0,r.jsx)(i.li,{children:"Money"}),"\n",(0,r.jsx)(i.li,{children:"Nchar"}),"\n",(0,r.jsx)(i.li,{children:"Ntext"}),"\n",(0,r.jsx)(i.li,{children:"Numeric"}),"\n",(0,r.jsx)(i.li,{children:"Nvarchar"}),"\n",(0,r.jsx)(i.li,{children:"Real"}),"\n",(0,r.jsx)(i.li,{children:"Smalldatetime"}),"\n",(0,r.jsx)(i.li,{children:"Smallint"}),"\n",(0,r.jsx)(i.li,{children:"Text"}),"\n",(0,r.jsx)(i.li,{children:"Time"}),"\n",(0,r.jsx)(i.li,{children:"Tinyint"}),"\n",(0,r.jsx)(i.li,{children:"Uniqueidentifier"}),"\n",(0,r.jsx)(i.li,{children:"Varbinary"}),"\n",(0,r.jsx)(i.li,{children:"Varchar"}),"\n",(0,r.jsx)(i.li,{children:"Xml"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"source",children:"Source"}),"\n",(0,r.jsx)(i.p,{children:"The SQL Server Source allows Flowtide to fetch rows and upates from a SQL Server table."}),"\n",(0,r.jsx)(i.admonition,{type:"info",children:(0,r.jsx)(i.p,{children:"It's strongly recommended that change tracking is enabled on the targeted tables. And must be enabled to allow near-realtime streaming."})}),"\n",(0,r.jsx)(i.p,{children:"The source uses the following logic to fetch data into the stream:"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjAvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMS9SRUMtU1ZHLTIwMDEwOTA0L0RURC9zdmcxMC5kdGQiPgo8c3ZnIHZpZXdCb3g9IjAgMCAxMDk2IDEyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczppbmtzcGFjZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogIDxkZWZzIGlkPSJkZWZzX2Jsb2NrIj4KICAgIDxmaWx0ZXIgaGVpZ2h0PSIxLjUwNCIgaWQ9ImZpbHRlcl9ibHVyIiBpbmtzcGFjZTpjb2xsZWN0PSJhbHdheXMiIHdpZHRoPSIxLjE1NzUiIHg9Ii0wLjA3ODc1IiB5PSItMC4yNTIiPgogICAgICA8ZmVHYXVzc2lhbkJsdXIgaWQ9ImZlR2F1c3NpYW5CbHVyMzc4MCIgaW5rc3BhY2U6Y29sbGVjdD0iYWx3YXlzIiBzdGREZXZpYXRpb249IjQuMiIgLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICA8dGl0bGU+YmxvY2tkaWFnPC90aXRsZT4KICA8ZGVzYz4gIGJsb2NrZGlhZyB7CiAgICBHZXRMYXRlc3RDaGFuZ2VWZXJzaW9uIFtsYWJlbCA9ICJHZXQgbGF0ZXN0IGNoYW5nZSB2ZXJzaW9uIiwgd2lkdGggPSAyMDBdCiAgICBMb2FkRXhpc3RpbmcgW2xhYmVsID0gIkxvYWQgMTAgMDAwIGV4aXN0aW5nIl0KICAgIEhhc01vcmVFeGlzdGluZyBbbGFiZWwgPSAiSGFzIG1vcmUiLCBzaGFwZSA9IGRpYW1vbmRdCiAgICBGZXRjaENoYW5nZXMgW2xhYmVsID0gIkZldGNoIGNoYW5nZXMiXQogICAgU3RvcmVDaGFuZ2VWZXJzaW9uIFtsYWJlbCA9ICJTdG9yZSBjaGFuZ2UgdmVyc2lvbiJdCgogICAgR2V0TGF0ZXN0Q2hhbmdlVmVyc2lvbiAtJmd0OyBMb2FkRXhpc3RpbmcKICAgIExvYWRFeGlzdGluZyAtJmd0OyBIYXNNb3JlRXhpc3RpbmcKICAgIEhhc01vcmVFeGlzdGluZyAtJmd0OyBMb2FkRXhpc3RpbmcgW2xhYmVsID0gIlllcyJdCiAgICBIYXNNb3JlRXhpc3RpbmcgLSZndDsgRmV0Y2hDaGFuZ2VzCiAgICBGZXRjaENoYW5nZXMgLSZndDsgU3RvcmVDaGFuZ2VWZXJzaW9uCiAgICBTdG9yZUNoYW5nZVZlcnNpb24gLSZndDsgRmV0Y2hDaGFuZ2VzIAogIH08L2Rlc2M+CiAgPHJlY3QgZmlsbD0icmdiKDAsMCwwKSIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiBzdHlsZT0iZmlsdGVyOnVybCgjZmlsdGVyX2JsdXIpO29wYWNpdHk6MC43O2ZpbGwtb3BhY2l0eToxIiB3aWR0aD0iMjAwIiB4PSI2NyIgeT0iNDYiIC8+CiAgPHJlY3QgZmlsbD0icmdiKDAsMCwwKSIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiBzdHlsZT0iZmlsdGVyOnVybCgjZmlsdGVyX2JsdXIpO29wYWNpdHk6MC43O2ZpbGwtb3BhY2l0eToxIiB3aWR0aD0iMTI4IiB4PSIzMzEiIHk9IjQ2IiAvPgogIDxyZWN0IGZpbGw9InJnYigwLDAsMCkiIGhlaWdodD0iNDAiIHN0cm9rZT0icmdiKDAsMCwwKSIgc3R5bGU9ImZpbHRlcjp1cmwoI2ZpbHRlcl9ibHVyKTtvcGFjaXR5OjAuNztmaWxsLW9wYWNpdHk6MSIgd2lkdGg9IjEyOCIgeD0iNzE1IiB5PSI0NiIgLz4KICA8cG9seWdvbiBmaWxsPSJyZ2IoMCwwLDApIiBwb2ludHM9IjU4NywzOCA2NTksNjYgNTg3LDk0IDUxNSw2NiA1ODcsMzgiIHN0cm9rZT0icmdiKDAsMCwwKSIgc3R5bGU9ImZpbHRlcjp1cmwoI2ZpbHRlcl9ibHVyKTtvcGFjaXR5OjAuNztmaWxsLW9wYWNpdHk6MSIgLz4KICA8cmVjdCBmaWxsPSJyZ2IoMCwwLDApIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHN0eWxlPSJmaWx0ZXI6dXJsKCNmaWx0ZXJfYmx1cik7b3BhY2l0eTowLjc7ZmlsbC1vcGFjaXR5OjEiIHdpZHRoPSIxMjgiIHg9IjkwNyIgeT0iNDYiIC8+CiAgPHJlY3QgZmlsbD0icmdiKDI1NSwyNTUsMjU1KSIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiB3aWR0aD0iMjAwIiB4PSI2NCIgeT0iNDAiIC8+CiAgPHRleHQgZmlsbD0icmdiKDAsMCwwKSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtc3R5bGU9Im5vcm1hbCIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdGV4dExlbmd0aD0iMTQzIiB4PSIxNjQuNSIgeT0iNjciPkdldCBsYXRlc3QgY2hhbmdlIHZlcnNpb248L3RleHQ+CiAgPHJlY3QgZmlsbD0icmdiKDI1NSwyNTUsMjU1KSIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSJyZ2IoMCwwLDApIiB3aWR0aD0iMTI4IiB4PSIzMjgiIHk9IjQwIiAvPgogIDx0ZXh0IGZpbGw9InJnYigwLDAsMCkiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmb250LXN0eWxlPSJub3JtYWwiIGZvbnQtd2VpZ2h0PSJub3JtYWwiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRleHRMZW5ndGg9IjExNyIgeD0iMzkyLjUiIHk9IjY3Ij5Mb2FkIDEwIDAwMCBleGlzdGluZzwvdGV4dD4KICA8cmVjdCBmaWxsPSJyZ2IoMjU1LDI1NSwyNTUpIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHdpZHRoPSIxMjgiIHg9IjcxMiIgeT0iNDAiIC8+CiAgPHRleHQgZmlsbD0icmdiKDAsMCwwKSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtc3R5bGU9Im5vcm1hbCIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdGV4dExlbmd0aD0iODEiIHg9Ijc3Ni41IiB5PSI2NyI+RmV0Y2ggY2hhbmdlczwvdGV4dD4KICA8cG9seWdvbiBmaWxsPSJyZ2IoMjU1LDI1NSwyNTUpIiBwb2ludHM9IjU4NCwzMiA2NTYsNjAgNTg0LDg4IDUxMiw2MCA1ODQsMzIiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8dGV4dCBmaWxsPSJyZ2IoMCwwLDApIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC1zdHlsZT0ibm9ybWFsIiBmb250LXdlaWdodD0ibm9ybWFsIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0ZXh0TGVuZ3RoPSI1NCIgeD0iNTg0LjAiIHk9IjY2Ij5IYXMgbW9yZTwvdGV4dD4KICA8cmVjdCBmaWxsPSJyZ2IoMjU1LDI1NSwyNTUpIiBoZWlnaHQ9IjQwIiBzdHJva2U9InJnYigwLDAsMCkiIHdpZHRoPSIxMjgiIHg9IjkwNCIgeT0iNDAiIC8+CiAgPHRleHQgZmlsbD0icmdiKDAsMCwwKSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtc3R5bGU9Im5vcm1hbCIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdGV4dExlbmd0aD0iMTE5IiB4PSI5NjguNSIgeT0iNjciPlN0b3JlIGNoYW5nZSB2ZXJzaW9uPC90ZXh0PgogIDxwYXRoIGQ9Ik0gMjY0IDYwIEwgMzIwIDYwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHBvbHlnb24gZmlsbD0icmdiKDAsMCwwKSIgcG9pbnRzPSIzMjcsNjAgMzIwLDU2IDMyMCw2NCAzMjcsNjAiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8cGF0aCBkPSJNIDQ1NiA2MCBMIDUwNCA2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwb2x5Z29uIGZpbGw9InJnYigwLDAsMCkiIHBvaW50cz0iNTExLDYwIDUwNCw1NiA1MDQsNjQgNTExLDYwIiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHBhdGggZD0iTSA2NTYgNjAgTCA2NjQgNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8cGF0aCBkPSJNIDY2NCA2MCBMIDY2NCAyNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwYXRoIGQ9Ik0gMzkyIDI1IEwgNjY0IDI1IiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHBhdGggZD0iTSAzOTIgMjUgTCAzOTIgMzIiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8cG9seWdvbiBmaWxsPSJyZ2IoMCwwLDApIiBwb2ludHM9IjM5MiwzOSAzODgsMzIgMzk2LDMyIDM5MiwzOSIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwYXRoIGQ9Ik0gNjU2IDYwIEwgNzA0IDYwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHBvbHlnb24gZmlsbD0icmdiKDAsMCwwKSIgcG9pbnRzPSI3MTEsNjAgNzA0LDU2IDcwNCw2NCA3MTEsNjAiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8cGF0aCBkPSJNIDg0MCA2MCBMIDg5NiA2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwb2x5Z29uIGZpbGw9InJnYigwLDAsMCkiIHBvaW50cz0iOTAzLDYwIDg5Niw1NiA4OTYsNjQgOTAzLDYwIiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHBhdGggZD0iTSAxMDMyIDYwIEwgMTA0OCA2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwYXRoIGQ9Ik0gMTA0OCA2MCBMIDEwNDggMjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8cGF0aCBkPSJNIDc3NiAyNSBMIDEwNDggMjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiKDAsMCwwKSIgLz4KICA8cGF0aCBkPSJNIDc3NiAyNSBMIDc3NiAzMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwwLDApIiAvPgogIDxwb2x5Z29uIGZpbGw9InJnYigwLDAsMCkiIHBvaW50cz0iNzc2LDM5IDc3MiwzMiA3ODAsMzIgNzc2LDM5IiBzdHJva2U9InJnYigwLDAsMCkiIC8+CiAgPHJlY3QgZmlsbD0id2hpdGUiIGhlaWdodD0iMTUiIHN0cm9rZT0icmdiKDAsMCwwKSIgd2lkdGg9IjM2IiB4PSI2MTQiIHk9IjMiIC8+CiAgPHRleHQgZmlsbD0icmdiKDAsMCwwKSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtc3R5bGU9Im5vcm1hbCIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdGV4dExlbmd0aD0iMjAiIHg9IjYzMi4wIiB5PSIxNiI+WWVzPC90ZXh0Pgo8L3N2Zz4K",alt:"blockdiag"})}),"\n",(0,r.jsx)(i.h3,{id:"reading-with-change-tracking",children:"Reading with change tracking"}),"\n",(0,r.jsx)(i.p,{children:"To configure a source for a table with change tracking:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'connectors.AddSqlServerSource(() => "connectionstring");\n\nconnectors.AddSqlServerSource(new SqlServerSourceOptions\n{\n    ConnectionStringFunc = () => "",\n});\n'})}),"\n",(0,r.jsxs)(i.p,{children:["By default changes are fetched once per second and can be modified using the ",(0,r.jsx)(i.code,{children:"DeltaLoadInterval"})," option."]}),"\n",(0,r.jsx)(i.h3,{id:"reading-without-change-tracking",children:"Reading without change tracking"}),"\n",(0,r.jsxs)(i.p,{children:["Flowtide can read data from sources that do not have change tracking enabled. For these sources data are all data is fetched on an interval, specified with the ",(0,r.jsx)(i.code,{children:"FullReloadInterval"})," option on the source."]}),"\n",(0,r.jsx)(i.admonition,{type:"warning",children:(0,r.jsx)(i.p,{children:"Note that changes are not directly caught when change tracking is disabled."})}),"\n",(0,r.jsx)(i.h4,{id:"reading-from-views",children:"Reading from views"}),"\n",(0,r.jsx)(i.p,{children:"To allow  from sql server views the following options must be set:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'connectors.AddSqlServerSource(new SqlServerSourceOptions\n{\n    ConnectionStringFunc = () => "",\n    EnableFullReload = true,\n    FullReloadInterval = TimeSpan.FromHours(24),\n});\n'})}),"\n",(0,r.jsx)(i.p,{children:"This will read all data from the view on an interval specified. Delta loading data is not enabled when targeting a view."}),"\n",(0,r.jsx)(i.h4,{id:"reading-from-tables",children:"Reading from tables"}),"\n",(0,r.jsxs)(i.p,{children:["When targeting a table that does not have change tracking enabled an additional option must be provided ",(0,r.jsx)(i.code,{children:"AllowFullReloadOnTablesWithoutChangeTracking"}),"."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'connectors.AddSqlServerSource(new SqlServerSourceOptions\n{\n    ConnectionStringFunc = () => "",\n    EnableFullReload = true,\n    FullReloadInterval = TimeSpan.FromHours(24),\n    AllowFullReloadOnTablesWithoutChangeTracking = true\n});\n'})}),"\n",(0,r.jsxs)(i.p,{children:["This will read all data from the table on an interval specified in ",(0,r.jsx)(i.code,{children:"FullReloadInterval"}),". Delta loading data is not enabled when targeting a table without change tracking."]}),"\n",(0,r.jsx)(i.admonition,{type:"info",children:(0,r.jsx)(i.p,{children:"If the table supports change tracking, delta loading will still be used even if these options are provided. But a full load will occur on the provided interval."})}),"\n",(0,r.jsx)(i.h4,{id:"reading-from-large-views-or-tables-without-change-tracking",children:"Reading from large views or tables without change tracking"}),"\n",(0,r.jsxs)(i.p,{children:["When targeting a large view or table it's possible to control the allowed size (number of rows) with the ",(0,r.jsx)(i.code,{children:"FullLoadMaxRowCount"})," option. This default value is 1 000 000 rows."]}),"\n",(0,r.jsx)(i.h3,{id:"retry-strategy-reading-from-sql-server",children:"Retry strategy (reading from SQL Server)"}),"\n",(0,r.jsx)(i.p,{children:"By default the SQL Server source has a default retry strategy that will retry up to 10 times with increasing intervals, totaling a period of ~16 minutes.\nIf no successful connection could be made during this period the stream will be restarted."}),"\n",(0,r.jsxs)(i.p,{children:["A custom pipeline can be specified on the source by setting the ",(0,r.jsx)(i.code,{children:"ResiliencePipeline"})," property."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"connectors.AddSqlServerSource(new SqlServerSourceOptions\n{\n    ResiliencePipeline = myPipeline\n});\n"})}),"\n",(0,r.jsxs)(i.p,{children:["Flowtide uses ",(0,r.jsx)(i.code,{children:"polly"})," to handle retries, documentation and examples can be found here: ",(0,r.jsx)(i.a,{href:"https://github.com/App-vNext/Polly",children:"Polly"}),"."]}),"\n",(0,r.jsx)(i.h2,{id:"sink",children:"Sink"}),"\n",(0,r.jsxs)(i.p,{children:["The ",(0,r.jsx)(i.em,{children:"SQL Server Sink"})," implements the ",(0,r.jsx)(i.em,{children:"grouped write operator"}),". This means that all rows are grouped by a primary key, thus all\nsink tables must have a primary key defined."]}),"\n",(0,r.jsx)(i.admonition,{type:"info",children:(0,r.jsx)(i.p,{children:"All SQL Server Sink tables must have a primary key defined. The primary key must also be in the query that fills the table."})}),"\n",(0,r.jsx)(i.p,{children:"Its implementation waits fully until the stream has reached a steady state at a time T until it writes data to the database.\nThis means that its table output can always be traced back to a state from the source systems."}),"\n",(0,r.jsxs)(i.p,{children:["To use the ",(0,r.jsx)(i.em,{children:"SQL Server Sink"})," add the following line to the ",(0,r.jsx)(i.em,{children:"ConnectorManager"}),":"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"connectorManager.AddSqlServerSink(() => connectionString);\n"})}),"\n",(0,r.jsxs)(i.p,{children:["As with the ",(0,r.jsx)(i.em,{children:"SQL Server Source"}),", the connection string is returned by a function to enable dynamic connection strings."]}),"\n",(0,r.jsxs)(i.p,{children:["The sink inserts data into ",(0,r.jsx)(i.em,{children:"SQL Server"})," by creating a temporary table, which follows the table structure of the destination with an added operation metadata column.\nThe data is inserted into the temporary table using ",(0,r.jsx)(i.em,{children:"Bulk Copy"}),". This allows for fast binary insertion into the temporary table."]}),"\n",(0,r.jsx)(i.p,{children:"After data has been inserted into the temporary table, a merge into statement is run that merges data into the destination table.\nAfter all data has been merged, the temporary table is cleared of all data."}),"\n",(0,r.jsx)(i.admonition,{type:"warning",children:(0,r.jsx)(i.p,{children:"If there are multiple rows in the result with the same primary key, only the latest seen row will be inserted into the destination table."})}),"\n",(0,r.jsx)(i.h3,{id:"custom-primary-keys",children:"Custom Primary Keys"}),"\n",(0,r.jsx)(i.p,{children:"In some scenarios you may want to override the table's primary keys or the table might not have a primary key configured.\nIn this scenario you can provide column names for the columns you want Flowtide to use as primary keys."}),"\n",(0,r.jsx)(i.p,{children:"Ex:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'connectorManager.AddSqlServerSink("your regexp on table names", new SqlServerSinkOptions() {\n  ConnectionStringFunc = () => connectionString,\n  CustomPrimaryKeys = new List<string>() { "my_column1", "my_column2" }\n});\n'})}),"\n",(0,r.jsx)(i.h2,{id:"sql-table-provider",children:"SQL Table Provider"}),"\n",(0,r.jsxs)(i.p,{children:["The SQL table provider is added to the ",(0,r.jsx)(i.em,{children:"SQL plan builder"})," which will try and look after used tables in its configured ",(0,r.jsx)(i.em,{children:"SQL Server"}),".\nIt provides metadata information about what the column names are in the table."]}),"\n",(0,r.jsxs)(i.p,{children:["To use the ",(0,r.jsx)(i.em,{children:"table provider"})," add the following line to the ",(0,r.jsx)(i.em,{children:"Sql plan builder"}),":"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:"sqlBuilder.AddSqlServerProvider(() => connectionString);\n"})}),"\n",(0,r.jsx)(i.p,{children:"If you are starting Flowtide with dependency injection, a table provider is added automatically, so this step is not required."})]})}function I(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>s});var t=n(6540);const r={},l=t.createContext(r);function a(e){const i=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(l.Provider,{value:i},e.children)}}}]);