"use strict";(self.webpackChunkflowtide=self.webpackChunkflowtide||[]).push([[556],{5641:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"sql/createview","title":"Create View","description":"The create view command allows you to define a reusable sub-plan.","source":"@site/docs/sql/createview.md","sourceDirName":"sql","slug":"/sql/createview","permalink":"/flowtide/docs/sql/createview","draft":false,"unlisted":false,"editUrl":"https://github.com/koralium/flowtide/tree/main/docs/docs/sql/createview.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Create Table","permalink":"/flowtide/docs/sql/createtable"},"next":{"title":"Select","permalink":"/flowtide/docs/sql/select/"}}');var s=a(4848),r=a(8453);const i={sidebar_position:3},o="Create View",l={},c=[{value:"Buffered view",id:"buffered-view",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"create-view",children:"Create View"})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.em,{children:"create view"})," command allows you to define a reusable sub-plan.\nWhen the SQL is converted into substrait, the view plan is added as a relation, and any usage of the view results in a ",(0,s.jsx)(t.a,{href:"https://substrait.io/relations/logical_relations/#reference-operator",children:"Reference Relation"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"If the same data should be accessable in multiple parts in a stream, creating a view is helpful to reduce having to redo the computation."}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sql",children:"CREATE VIEW testview AS\nSELECT c1 + 1 as column FROM testtable;\n\nINSERT INTO outputtable\nSELECT column FROM testview;\n"})}),"\n",(0,s.jsx)(t.h2,{id:"buffered-view",children:"Buffered view"}),"\n",(0,s.jsx)(t.p,{children:"It is possible to create a buffered view.\nIt is a view that collects all the output from the view in to temporary storage and waits for a watermark."}),"\n",(0,s.jsxs)(t.p,{children:["This can reduce the output from the view in situations where data is updated regularly but gives the same output value.\nOne example is when a column value is based on ",(0,s.jsx)(t.em,{children:"gettimestamp"})," such as ",(0,s.jsx)(t.em,{children:"gettimestamp() > date"})," which will give the same output\nthe majority of the time. The buffered view will then only give out the changed rows, and can reduce computational load in the result of the stream."]}),"\n",(0,s.jsxs)(t.p,{children:["It adds a ",(0,s.jsx)(t.a,{href:"/docs/operators/buffer",children:"buffer operator"})," at the end of the view."]}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sql",children:"CREATE VIEW buffered WITH (BUFFERED = true) AS\nSELECT\n    CASE WHEN orderdate < gettimestamp() THEN true ELSE false END as active\nFROM orders;\n"})})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,a)=>{a.d(t,{R:()=>i,x:()=>o});var n=a(6540);const s={},r=n.createContext(s);function i(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);